(window.webpackJsonp=window.webpackJsonp||[]).push([[131],{615:function(s,a,n){"use strict";n.r(a);var e=n(58),t=Object(e.a)({},(function(){var s=this,a=s.$createElement,n=s._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h2",{attrs:{id:"mysql-随记"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#mysql-随记"}},[s._v("#")]),s._v(" Mysql-随记")]),s._v(" "),n("h4",{attrs:{id:"优化-其他"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#优化-其他"}},[s._v("#")]),s._v(" 优化-其他")]),s._v(" "),n("div",{staticClass:"language-MYSQL line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("关闭唯一性校验:SET UNIQUE_CHECK = 0\nSHOW STATUS like '%innodb_rows_%'\t--分析当前表增删查改情况\nshow processlist:查看实时SQL执行情况\nexplain 结合上面的 show processlist分析语句\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("h3",{attrs:{id:"mysql-锁"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#mysql-锁"}},[s._v("#")]),s._v(" MYSQL-锁")]),s._v(" "),n("p",[s._v("隔离级别")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("四种隔离级别:读未提交，读提交，可重复读，可序化\n\n读未提交:A事务写数据，别的事务允许读，不允许写。B事务可能读到A事务为提交的数据。\n\n读提交:A事务读数据，则允许其他事务读写，A事务写数据，其他事务禁止操作。\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])]),n("p",[s._v("概览")]),s._v(" "),n("div",{staticClass:"language-MySQL line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("分类\n表锁，行锁，读锁(共享锁)，写锁（排他锁）,间隙锁\n行锁:锁字段\n表锁:锁所有字段\n\n特点\n表锁:开销小，粒度大，速度快\n行锁:开销大，粒度小\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("p",[s._v("应用")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('set autocommit = 0 :关闭事务自动提交\nshow status like "innodb_row_lock%";查看锁的状态\n\tInnodb_row_lock_current_waits：正在等待行锁的数量\n\tInnodb_row_lock_time:锁定的时长\n\tInnodb_row_lock_time_avg：锁定的平均时长\n\tInnodb_row_lock_waits：一共等待多少次数\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])]),n("h3",{attrs:{id:"mysql-备份"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#mysql-备份"}},[s._v("#")]),s._v(" MYSQL-备份")]),s._v(" "),n("h4",{attrs:{id:"备份sql"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#备份sql"}},[s._v("#")]),s._v(" 备份SQL")]),s._v(" "),n("div",{staticClass:"language-MYSQL line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("load data local infile '本地绝对路径' into table '表格'\nfields terminated by ',' lines terminated by '\\n'\n解释语句\nload data local infile:添加文件固定写法\nfields terminated by ',':通过 ','分隔每个语句\nlines terminated by '\\n':通过 '\\n'分隔每一行\nSQL语句中有大量分号，所以需要上面分隔符处理\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("p",[s._v("命令")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("#mysqldump:备份数据，不同数据库之间迁移，备份内容:创建表，插入表的SQL语句\n#mysqlimport/source:导入mysqldump导出的文件\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("h3",{attrs:{id:"mysql-索引"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#mysql-索引"}},[s._v("#")]),s._v(" MYSQL-索引")]),s._v(" "),n("p",[s._v("概念")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("1.本质是一张（二叉树）表\n2.会占用磁盘空间\n3.加快查询。但每次添加数据都会更新表,影响增删改\n4.查询频率高,数据量比较大才建索引\n5.在where之后的字段建立索引\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("p",[s._v("注意")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("行锁升级为表锁\n1.索引失效，InnoDB对表中的所有记录加锁，将形成表锁\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[s._v("操作")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("show index from tableA:查看索引\t\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h3",{attrs:{id:"mysql-集群"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#mysql-集群"}},[s._v("#")]),s._v(" MYSQL-集群")]),s._v(" "),n("h4",{attrs:{id:"主从复制"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#主从复制"}},[s._v("#")]),s._v(" 主从复制")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("概念：\n\t通过二进制文件作为载体，将主数据库和从数据库的内容保持一致\n\t基于二进制文件完成的\n步骤\n\t1.Master主库提交事务时，会把变更记录在二进制文件A.LOG中\n\t2.主库推送A.LOG二进制文件到从库的中继日志\n\t3.SLAVE重做中继日志的事件\n优势\n\t1.主库出现问题，可以快速切换到从库提供服务\n\t2.可以完成读写分离操作\n\t3.分离备份\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br")])])])}),[],!1,null,null,null);a.default=t.exports}}]);