<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Redis-管理 | 资料驿站</title>
    <meta name="generator" content="VuePress 1.8.0">
    
    <meta name="description" content="编程就是复制粘贴">
    
    <link rel="preload" href="/assets/css/0.styles.394cd1f1.css" as="style"><link rel="preload" href="/assets/js/app.3907986d.js" as="script"><link rel="preload" href="/assets/js/2.662b09a6.js" as="script"><link rel="preload" href="/assets/js/163.5dd96070.js" as="script"><link rel="prefetch" href="/assets/js/10.60f708a2.js"><link rel="prefetch" href="/assets/js/100.7c6936c8.js"><link rel="prefetch" href="/assets/js/101.8ef702b7.js"><link rel="prefetch" href="/assets/js/102.e32dd7f2.js"><link rel="prefetch" href="/assets/js/103.68932719.js"><link rel="prefetch" href="/assets/js/104.ee5b0def.js"><link rel="prefetch" href="/assets/js/105.c62b0de5.js"><link rel="prefetch" href="/assets/js/106.232c7655.js"><link rel="prefetch" href="/assets/js/107.e35fbf74.js"><link rel="prefetch" href="/assets/js/108.7062f42a.js"><link rel="prefetch" href="/assets/js/109.bcd07bb1.js"><link rel="prefetch" href="/assets/js/11.78a653fb.js"><link rel="prefetch" href="/assets/js/110.35b31a48.js"><link rel="prefetch" href="/assets/js/111.4cd3045e.js"><link rel="prefetch" href="/assets/js/112.edcf2f65.js"><link rel="prefetch" href="/assets/js/113.401bc65a.js"><link rel="prefetch" href="/assets/js/114.ef9ea077.js"><link rel="prefetch" href="/assets/js/115.2bb83e5c.js"><link rel="prefetch" href="/assets/js/116.456d5524.js"><link rel="prefetch" href="/assets/js/117.14b5fbc8.js"><link rel="prefetch" href="/assets/js/118.4f4222e3.js"><link rel="prefetch" href="/assets/js/119.ad6f9889.js"><link rel="prefetch" href="/assets/js/12.46704708.js"><link rel="prefetch" href="/assets/js/120.b2eaa494.js"><link rel="prefetch" href="/assets/js/121.f323714b.js"><link rel="prefetch" href="/assets/js/122.d88300b4.js"><link rel="prefetch" href="/assets/js/123.604a5df7.js"><link rel="prefetch" href="/assets/js/124.d44281ec.js"><link rel="prefetch" href="/assets/js/125.59487921.js"><link rel="prefetch" href="/assets/js/126.9ca4bc7e.js"><link rel="prefetch" href="/assets/js/127.43d35a36.js"><link rel="prefetch" href="/assets/js/128.417f1c0d.js"><link rel="prefetch" href="/assets/js/129.aa1fd545.js"><link rel="prefetch" href="/assets/js/13.dfd82dda.js"><link rel="prefetch" href="/assets/js/130.343c171b.js"><link rel="prefetch" href="/assets/js/131.84df4502.js"><link rel="prefetch" href="/assets/js/132.36336d46.js"><link rel="prefetch" href="/assets/js/133.e4569ef8.js"><link rel="prefetch" href="/assets/js/134.31882b43.js"><link rel="prefetch" href="/assets/js/135.bc248297.js"><link rel="prefetch" href="/assets/js/136.cbed8fa1.js"><link rel="prefetch" href="/assets/js/137.535e448c.js"><link rel="prefetch" href="/assets/js/138.3ef35d9c.js"><link rel="prefetch" href="/assets/js/139.53252ed7.js"><link rel="prefetch" href="/assets/js/14.5ddeda14.js"><link rel="prefetch" href="/assets/js/140.40abb471.js"><link rel="prefetch" href="/assets/js/141.b17d4e43.js"><link rel="prefetch" href="/assets/js/142.f872cfaf.js"><link rel="prefetch" href="/assets/js/143.b6da502b.js"><link rel="prefetch" href="/assets/js/144.8fbdde70.js"><link rel="prefetch" href="/assets/js/145.1d166339.js"><link rel="prefetch" href="/assets/js/146.13c3fc49.js"><link rel="prefetch" href="/assets/js/147.d84e56a2.js"><link rel="prefetch" href="/assets/js/148.2b35db04.js"><link rel="prefetch" href="/assets/js/149.4f64eaee.js"><link rel="prefetch" href="/assets/js/15.2605c1b9.js"><link rel="prefetch" href="/assets/js/150.8d70f627.js"><link rel="prefetch" href="/assets/js/151.92fca599.js"><link rel="prefetch" href="/assets/js/152.64faea6d.js"><link rel="prefetch" href="/assets/js/153.03a746e4.js"><link rel="prefetch" href="/assets/js/154.f2fd10e1.js"><link rel="prefetch" href="/assets/js/155.fa71f57b.js"><link rel="prefetch" href="/assets/js/156.af86b8ed.js"><link rel="prefetch" href="/assets/js/157.9cee6e93.js"><link rel="prefetch" href="/assets/js/158.b1e121b4.js"><link rel="prefetch" href="/assets/js/159.31e80df3.js"><link rel="prefetch" href="/assets/js/16.98f119e2.js"><link rel="prefetch" href="/assets/js/160.30c7adc5.js"><link rel="prefetch" href="/assets/js/161.89e934d7.js"><link rel="prefetch" href="/assets/js/162.de883a10.js"><link rel="prefetch" href="/assets/js/164.a5d5f8f1.js"><link rel="prefetch" href="/assets/js/165.3bbaf68c.js"><link rel="prefetch" href="/assets/js/166.5a088bc0.js"><link rel="prefetch" href="/assets/js/167.b0e732de.js"><link rel="prefetch" href="/assets/js/168.a8f733a1.js"><link rel="prefetch" href="/assets/js/169.43cb0305.js"><link rel="prefetch" href="/assets/js/17.a7aaa57e.js"><link rel="prefetch" href="/assets/js/170.091984d4.js"><link rel="prefetch" href="/assets/js/171.1d57bbeb.js"><link rel="prefetch" href="/assets/js/18.aa760b5a.js"><link rel="prefetch" href="/assets/js/19.8deda17c.js"><link rel="prefetch" href="/assets/js/20.796c8f36.js"><link rel="prefetch" href="/assets/js/21.0f56ffc7.js"><link rel="prefetch" href="/assets/js/22.5993dffc.js"><link rel="prefetch" href="/assets/js/23.2e98a089.js"><link rel="prefetch" href="/assets/js/24.c230e896.js"><link rel="prefetch" href="/assets/js/25.1f9a835f.js"><link rel="prefetch" href="/assets/js/26.5ccdb8f1.js"><link rel="prefetch" href="/assets/js/27.cec72e46.js"><link rel="prefetch" href="/assets/js/28.f1c41c92.js"><link rel="prefetch" href="/assets/js/29.f811e4e0.js"><link rel="prefetch" href="/assets/js/3.02743985.js"><link rel="prefetch" href="/assets/js/30.a0cfdac2.js"><link rel="prefetch" href="/assets/js/31.89bb7328.js"><link rel="prefetch" href="/assets/js/32.cff29b52.js"><link rel="prefetch" href="/assets/js/33.bbccd0c8.js"><link rel="prefetch" href="/assets/js/34.8d6cb34a.js"><link rel="prefetch" href="/assets/js/35.6a68f421.js"><link rel="prefetch" href="/assets/js/36.f36f7506.js"><link rel="prefetch" href="/assets/js/37.458a353b.js"><link rel="prefetch" href="/assets/js/38.3a529a79.js"><link rel="prefetch" href="/assets/js/39.d24df52d.js"><link rel="prefetch" href="/assets/js/4.73e65dc3.js"><link rel="prefetch" href="/assets/js/40.84915ff1.js"><link rel="prefetch" href="/assets/js/41.6c9b665e.js"><link rel="prefetch" href="/assets/js/42.e5ef83a0.js"><link rel="prefetch" href="/assets/js/43.2d73904b.js"><link rel="prefetch" href="/assets/js/44.b0123a3b.js"><link rel="prefetch" href="/assets/js/45.49022127.js"><link rel="prefetch" href="/assets/js/46.9c7cc003.js"><link rel="prefetch" href="/assets/js/47.7681cebf.js"><link rel="prefetch" href="/assets/js/48.7cb63edf.js"><link rel="prefetch" href="/assets/js/49.6ebb8d24.js"><link rel="prefetch" href="/assets/js/5.2b9c6136.js"><link rel="prefetch" href="/assets/js/50.e9235f23.js"><link rel="prefetch" href="/assets/js/51.c5f1dbe6.js"><link rel="prefetch" href="/assets/js/52.0a16d439.js"><link rel="prefetch" href="/assets/js/53.82e7869a.js"><link rel="prefetch" href="/assets/js/54.308b3f49.js"><link rel="prefetch" href="/assets/js/55.05895b87.js"><link rel="prefetch" href="/assets/js/56.979dcb5d.js"><link rel="prefetch" href="/assets/js/57.d72c18b0.js"><link rel="prefetch" href="/assets/js/58.431f04a5.js"><link rel="prefetch" href="/assets/js/59.5373c571.js"><link rel="prefetch" href="/assets/js/6.ba24ad0e.js"><link rel="prefetch" href="/assets/js/60.f5da3cb8.js"><link rel="prefetch" href="/assets/js/61.f10880c1.js"><link rel="prefetch" href="/assets/js/62.218a85d7.js"><link rel="prefetch" href="/assets/js/63.01edeae5.js"><link rel="prefetch" href="/assets/js/64.0e22d8aa.js"><link rel="prefetch" href="/assets/js/65.b29ae1f1.js"><link rel="prefetch" href="/assets/js/66.3acee2a2.js"><link rel="prefetch" href="/assets/js/67.adcbac34.js"><link rel="prefetch" href="/assets/js/68.4f4d66f8.js"><link rel="prefetch" href="/assets/js/69.f5a2991b.js"><link rel="prefetch" href="/assets/js/7.182e938d.js"><link rel="prefetch" href="/assets/js/70.81560996.js"><link rel="prefetch" href="/assets/js/71.03d205ac.js"><link rel="prefetch" href="/assets/js/72.570e2ab0.js"><link rel="prefetch" href="/assets/js/73.c9050c60.js"><link rel="prefetch" href="/assets/js/74.ee658656.js"><link rel="prefetch" href="/assets/js/75.5d8c1807.js"><link rel="prefetch" href="/assets/js/76.4888cae0.js"><link rel="prefetch" href="/assets/js/77.621051ed.js"><link rel="prefetch" href="/assets/js/78.6d2ae189.js"><link rel="prefetch" href="/assets/js/79.3f4a31c8.js"><link rel="prefetch" href="/assets/js/8.b5e427c1.js"><link rel="prefetch" href="/assets/js/80.bca99f3c.js"><link rel="prefetch" href="/assets/js/81.09363901.js"><link rel="prefetch" href="/assets/js/82.01e64bed.js"><link rel="prefetch" href="/assets/js/83.0addfef0.js"><link rel="prefetch" href="/assets/js/84.d88579ab.js"><link rel="prefetch" href="/assets/js/85.e61dfe93.js"><link rel="prefetch" href="/assets/js/86.6c932b22.js"><link rel="prefetch" href="/assets/js/87.73f77c40.js"><link rel="prefetch" href="/assets/js/88.e67b1d20.js"><link rel="prefetch" href="/assets/js/89.965723e6.js"><link rel="prefetch" href="/assets/js/9.432dd57e.js"><link rel="prefetch" href="/assets/js/90.043ca2f5.js"><link rel="prefetch" href="/assets/js/91.a77f5aa4.js"><link rel="prefetch" href="/assets/js/92.a8c8eb7e.js"><link rel="prefetch" href="/assets/js/93.226beee0.js"><link rel="prefetch" href="/assets/js/94.1832d65a.js"><link rel="prefetch" href="/assets/js/95.34d63dde.js"><link rel="prefetch" href="/assets/js/96.03a5cf63.js"><link rel="prefetch" href="/assets/js/97.f7aa5ad0.js"><link rel="prefetch" href="/assets/js/98.50893385.js"><link rel="prefetch" href="/assets/js/99.50cdea98.js">
    <link rel="stylesheet" href="/assets/css/0.styles.394cd1f1.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">资料驿站</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="IT编程" class="dropdown-title"><span class="title">IT编程</span> <span class="arrow down"></span></button> <button type="button" aria-label="IT编程" class="mobile-dropdown-title"><span class="title">IT编程</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note/目录-前端基础/前端-CSS/CSS-常用.html" class="nav-link">
  Css
</a></li><li class="dropdown-item"><!----> <a href="/note/目录-前端框架/前端-Vue/Vue-原理.html" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/note/目录-后台基础/Java-多线程/多线程-基本概念.html" class="nav-link">
  Java
</a></li><li class="dropdown-item"><!----> <a href="/note/目录-系统运维/运维-Linux/Linux-端口安全.html" class="nav-link">
  Linux-运维
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="常用工具" class="dropdown-title"><span class="title">常用工具</span> <span class="arrow down"></span></button> <button type="button" aria-label="常用工具" class="mobile-dropdown-title"><span class="title">常用工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note/目录-综合其他/常用网页.html" class="nav-link">
  常用网页
</a></li><li class="dropdown-item"><!----> <a href="/note/目录-综合其他/踩坑记录.html" class="nav-link">
  异常记录
</a></li><li class="dropdown-item"><!----> <a href="/note/目录-综合其他/配置文档.html" class="nav-link">
  配置文档
</a></li></ul></div></div><div class="nav-item"><a href="/note/目录-综合其他/资源文件.html" class="nav-link">
  资源下载
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="IT编程" class="dropdown-title"><span class="title">IT编程</span> <span class="arrow down"></span></button> <button type="button" aria-label="IT编程" class="mobile-dropdown-title"><span class="title">IT编程</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note/目录-前端基础/前端-CSS/CSS-常用.html" class="nav-link">
  Css
</a></li><li class="dropdown-item"><!----> <a href="/note/目录-前端框架/前端-Vue/Vue-原理.html" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/note/目录-后台基础/Java-多线程/多线程-基本概念.html" class="nav-link">
  Java
</a></li><li class="dropdown-item"><!----> <a href="/note/目录-系统运维/运维-Linux/Linux-端口安全.html" class="nav-link">
  Linux-运维
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="常用工具" class="dropdown-title"><span class="title">常用工具</span> <span class="arrow down"></span></button> <button type="button" aria-label="常用工具" class="mobile-dropdown-title"><span class="title">常用工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note/目录-综合其他/常用网页.html" class="nav-link">
  常用网页
</a></li><li class="dropdown-item"><!----> <a href="/note/目录-综合其他/踩坑记录.html" class="nav-link">
  异常记录
</a></li><li class="dropdown-item"><!----> <a href="/note/目录-综合其他/配置文档.html" class="nav-link">
  配置文档
</a></li></ul></div></div><div class="nav-item"><a href="/note/目录-综合其他/资源文件.html" class="nav-link">
  资源下载
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Linux-运维</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/note/目录-系统运维/运维-Linux/Linux-端口安全.html" class="sidebar-link">端口操作</a></li><li><a href="/note/目录-系统运维/运维-Linux/Linux-文件操作.html" class="sidebar-link">文件操作</a></li><li><a href="/note/目录-系统运维/运维-Linux/Linux-用户管理.html" class="sidebar-link">用户管理</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Linux-软件安装</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/note/目录-系统运维/运维-Maven/Maven-安装配置.html" class="sidebar-link">安装-Maven</a></li><li><a href="/note/目录-系统运维/运维-Nginx/Nginx-安装.html" class="sidebar-link">安装-Nginx</a></li><li><a href="/note/目录-系统运维/运维-Java/Linux-安装.html" class="sidebar-link">安装-Java</a></li><li><a href="/note/目录-系统运维/运维-Docker/Docker-安装.html" class="sidebar-link">安装-Docker</a></li><li><a href="/note/目录-系统运维/运维-Redis/Redis-安装.html" class="sidebar-link">安装-Redis</a></li><li><a href="/note/目录-系统运维/运维-Github/Git-安装.html" class="sidebar-link">安装-Github</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h3 id="redis-管理"><a href="#redis-管理" class="header-anchor">#</a> Redis-管理</h3> <h4 id="过期管理"><a href="#过期管理" class="header-anchor">#</a> 过期管理</h4> <table><thead><tr><th style="text-align:center;">策略</th> <th style="text-align:center;">说明</th></tr></thead> <tbody><tr><td style="text-align:center;">volatile-lru</td> <td style="text-align:center;">为已添加超时的数据，用LRU算法删除</td></tr> <tr><td style="text-align:center;">allkeys-lru</td> <td style="text-align:center;">用LRU算法删除所有key</td></tr> <tr><td style="text-align:center;">volatile-random</td> <td style="text-align:center;">随机删除设定了超时的数据</td></tr> <tr><td style="text-align:center;">allkeys-random</td> <td style="text-align:center;">用LRU算法随机删除key</td></tr> <tr><td style="text-align:center;">volatile-ttl</td> <td style="text-align:center;">对设定了超时的数据中，根据TTL机制排序，删除将要过期的数据</td></tr> <tr><td style="text-align:center;">noeviction</td> <td style="text-align:center;">(默认)内存数据不会删除，报错</td></tr></tbody></table> <h4 id="快照管理"><a href="#快照管理" class="header-anchor">#</a> 快照管理</h4> <p>RDB</p> <h4 id="配置管理"><a href="#配置管理" class="header-anchor">#</a> 配置管理</h4> <h5 id="日志配置"><a href="#日志配置" class="header-anchor">#</a> 日志配置</h5> <div class="language-MYSQL line-numbers-mode"><pre class="language-text"><code>#日志配置
    #级别:debug,verbose,notice,warning 默认为notice
    loglevel notice
    #指定redis日志目录,默认为stdout
    #logfile ~/redislog.log
	logfile stdout
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>数据库配置</p> <div class="language-MYSQL line-numbers-mode"><pre class="language-text"><code>#数据库配置
    #设定redis所允许的最大数据库的个数,默认为16个.
    databases 16

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h5 id="备份配置"><a href="#备份配置" class="header-anchor">#</a> 备份配置</h5> <div class="language-MYSQL line-numbers-mode"><pre class="language-text"><code>#备份配置
	#save 时间(s) 操作数(n)：在s秒中发生至少n个操作触发备份
    #	snapshot最终将生成新的dump.rdb文件
    #	save &quot;&quot;用来禁用snapshot功能
    #	如下表示12小时内至少一个key变更,触发snapshot
save 43200 1
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h5 id="安全配置"><a href="#安全配置" class="header-anchor">#</a> 安全配置</h5> <div class="language-MYSQL line-numbers-mode"><pre class="language-text"><code>#配置密码
requirepass passwd

#和主机器密码保持一致,实现主从复制
masterauth &lt;master-password&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h5 id="其他配置"><a href="#其他配置" class="header-anchor">#</a> 其他配置</h5> <div class="language-MYSQL line-numbers-mode"><pre class="language-text"><code>#将redis是否以后台进程的方式运行,默认&quot;no&quot;
#如果&quot;daemonize yes&quot;,将把进程id写入文件.
#请注意:  需要具有写入此目录的权限.
daemonize no


#pidfile ~/redis.pid
#指令操作:./redis.server --daemonize yes --pidfile ~/redis.pid
pidfile /var/run/redis.pid



##如果snapshot过程中出现错误,即数据持久化失败,是否终止所有的客户端write请求.
##这个选项很让人为难,&quot;yes&quot;表示终止,一旦snapshot故障,那么此server为只读服务;

##如果为&quot;no&quot;,那么此次snapshot将失败,但下一次snapshot不会受到影响,不过如果出现故障,数据只能恢复到&quot;最近一个成功点&quot;.
stop-writes-on-bgsave-error yes

##是否启用rdb文件压缩手段,默认为yes.

##压缩可能需要额外的cpu开支,不过这能够有效的减小rdb文件的大小,有利于存储/备份/传输/数据恢复.
rdbcompression yes

##是否对rdb文件使用CRC64校验和,默认为&quot;yes&quot;,那么每个rdb文件内容的末尾都会追加CRC校验和.
##对于其他第三方校验工具,可以很方便的检测文件的完整性
rdbchecksum yes

##指定rdb文件的名称
dbfilename dump.rdb

##指定rdb/AOF文件的目录位置
dir ./

# 将当前server做为slave,并为其指定master信息.
# slaveof &lt;masterip&gt; &lt;masterport&gt;

 



##如果当前server是slave,那么当slave与master失去通讯时,是否继续为客户端提供服务,&quot;yes&quot;表示继续,&quot;no&quot;表示终止.
##在&quot;yes&quot;情况下,slave继续向客户端提供只读服务,有可能此时的数据已经过期.
##在&quot;no&quot;情况下,任何向此server发送的数据请求服务(包括客户端和此server的slave)都将被告知&quot;error&quot;
slave-serve-stale-data yes

##slave是否为&quot;只读&quot;,强烈建议为&quot;yes&quot;
slave-read-only yes

##slave向指定的master发送ping消息的时间间隔(秒),默认为10
# repl-ping-slave-period 10

##slave与master通讯中,最大空闲时间,默认60秒.超时将导致连接关闭.
# repl-timeout 60

##slave与master的连接,是否禁用TCP nodelay选项.
##&quot;yes&quot;表示禁用,那么socket通讯中数据将会以packet方式发送(packet大小受到socket buffer限制),
##       可以提高socket通讯的效率(tcp交互次数),但是小数据将会被buffer,不会被立即发送,对于接受者可能存在延迟.
##&quot;no&quot;表示开启tcp nodelay选项,任何数据都会被立即发送,及时性较好,但是效率较低
##建议为&quot;no&quot;
repl-disable-tcp-nodelay no

##适用Sentinel模块(unstable,M-S集群管理和监控),需要额外的配置文件支持
##slave的权重值,默认100.当master失效后,Sentinel将会从slave列表中找到权重值最低(&gt;0)的slave,并提升为master
##如果权重值为0,表示此slave为&quot;观察者&quot;,不参与master选举
slave-priority 100

##重命名指令,对于一些与&quot;server&quot;控制有关的指令,可能不希望远程客户端(非管理员用户)链接随意使用,
##那么就可以把这些指令重命名为&quot;难以阅读&quot;的其他字符串.
##例如&quot;slaveof&quot;   &quot;CONFIG&quot;   &quot;BGREWRITEAOF&quot;   &quot;BGREWRITE&quot;   &quot;FLUSHALL&quot;等指令需要被限制访问

##配置项格式: rename-command &lt;command&gt; &lt;newCommand&gt;
# rename-command CONFIG 3ed984507a5dcd722aeade310065ce5d    (方式:MD5('CONFIG^!'))

##所允许的客户端连接数,默认为10000.
##此值不可能被设置成过大,因为每个socket连接都会以&quot;文件描述符&quot;的方式被系统打开,它受到系统&quot;文件打开个数&quot;的限制
##如果超过此值,server将会拒绝连接.
# maxclients 10000

##redis-cache所能使用的最大内存(bytes),默认为0,表示&quot;无限制&quot;,最终由OS物理内存大小决定(如果物理内存不足,有可能会使用swap)
##如果此值设置过小(比如32字节),将直接导致server无法使用.
##此值尽量不要超过机器的物理内存尺寸,从性能和实施的角度考虑,可以为物理内存3/4.
##此配置需要和&quot;maxmemory-policy&quot;配合使用,当redis中内存数据达到maxmemory时,触发&quot;清除策略&quot;.
##如果使用&quot;清除策略&quot;后,仍无法得到足够的内存来存储新的数据,那么write操作的客户端将会收到&quot;error OOM..&quot;信息,此时server只读.
##在&quot;内存不足&quot;时,任何write操作(比如set,lpush等)都会触发&quot;清除策略&quot;的执行.
##在实际环境中,建议redis的所有物理机器的硬件配置保持一致(内存一致),同时确保master/slave中&quot;maxmemory&quot;&quot;policy&quot;配置一致
# maxmemory &lt;bytes&gt;

##&quot;内存不足&quot;时,数据清除策略,默认为&quot;volatile-lru&quot;
## volatile-lru    -&gt;对&quot;过期集合&quot;中的数据采取LRU(近期最少使用)算法.如果对key使用&quot;expire&quot;指令指定了过期时间,那么此key将会被添加到&quot;过期集合&quot;中.

##每个Redis对象，都保留一个“最后访问时间”的属性，可以用来判断此对象空闲的时间，那么LRU算法就可以根据此属性来进行判断。
## 将已经过期/LRU的数据优先移除.如果&quot;过期集合&quot;中全部移除仍不能满足内存需求,将OOM.
## allkeys-lru -&gt;对所有的数据,采用LRU算法
## volatile-random -&gt;对&quot;过期集合&quot;中的数据采取&quot;随即选取&quot;算法,并移除选中的K-V,直到&quot;内存足够&quot;为止.
## 如果如果&quot;过期集合&quot;中全部移除全部移除仍不能满足,将OOM
## allkeys-random -&gt;对所有的数据,采取&quot;随即选取&quot;算法,并移除选中的K-V,直到&quot;内存足够&quot;为止.
## volatile-ttl -&gt;对&quot;过期集合&quot;中的数据采取TTL算法(最小存活时间),移除即将过期的数据.
## noeviction -&gt;不做任何干扰操作,直接返回OOM异常.
###
##如果数据的过期不会对&quot;应用系统&quot;带来异常,且系统中write操作比较密集,建议采取&quot;allkeys-lru&quot;
# maxmemory-policy volatile-lru


##是否开启aof功能,&quot;yes&quot;表示开启,在开启情况下,aof文件同步功能才生效,默认为&quot;no&quot;
##对master机器,建议使用AOF,对于slave,建议关闭(采用snapshot),
appendonly no


##aof中文件同步机制
## always -&gt;任何一个aof记录都立即进行文件同步(磁盘写入),安全性最高;如果write请求比较密集,将会造成较高的磁盘IO开支和响应延迟
## everysec -&gt;每秒同步一次,性能和安全性都较高的策略,也是默认值
## no -&gt;不直接同步,让文件同步交给OS控制,OS将会根据文件流通道中buffer情况/空闲情况进行择机写入磁盘.安全性和效率与OS设定有关.
appendfsync everysec

##在aof rewrite期间,是否对aof新记录的append暂缓使用文件同步策略,主要考虑磁盘IO开支和请求阻塞时间.
##默认为no,表示&quot;不暂缓&quot;,新的aof记录仍然会被立即同步
##
no-appendfsync-on-rewrite no

##aof rewrite触发时机,最小文件尺寸
auto-aof-rewrite-min-size 64mb


##aof每次rewrite之后,都会记住当前aof文件的大小,当文件增长到一定比例后,继续进行aof rewrite
auto-aof-rewrite-percentage 100

##aof rewrite过程中,是否采取增量&quot;文件同步&quot;策略,默认为&quot;yes&quot;,而且必须为yes.
##rewrite过程中,每32M数据进行一次文件同步,这样可以减少&quot;aof大文件&quot;写入对磁盘的操作次数.
aof-rewrite-incremental-fsync yes

##lua脚本运行的最大时间
lua-time-limit 5000

##&quot;慢操作日志&quot;记录,单位:微秒(百万分之一秒,1000 * 1000),如果操作时间超过此值,将会把command信息&quot;记录&quot;起来.(内存,非文件)
##其中&quot;操作时间&quot;不包括网络IO开支,只包括请求达到server后进行&quot;内存实施&quot;的时间.&quot;0&quot;表示记录全部操作.
slowlog-log-slower-than 10000
##&quot;慢操作日志&quot;保留的最大条数,&quot;记录&quot;将会被队列化,如果超过了此长度,旧记录将会被移除.
##可以通过&quot;SLOWLOG &lt;subcommand&gt; args&quot;查看慢记录的信息(SLOWLOG get 10,SLOWLOG reset)
##通过&quot;SLOWLOG get num&quot;指令可以查看最近num条慢速记录,其中包括&quot;记录&quot;操作的时间/指令/K-V等信息
slowlog-max-len 128

##通过&quot;TYPE key&quot;指令查看key的数据类型
##通过&quot;OBJECT encoding key&quot;查看key的编码类型
##hash类型的数据结构在编码上可以使用ziplist和hashtable

##ziplist的特点就是文件存储(以及内存存储)所需的空间较小,在内容较小时,性能和hashtable几乎一样.因此redis对hash类型默认采取ziplist.

##如果hash中条目的条目个数或者value长度达到阀值,将会被重构为hashtable.
##ziplist中允许存储的最大条目个数,建议为128
hash-max-ziplist-entries 512
##ziplist中允许条目value值最大字节数,建议为1024
hash-max-ziplist-value 64

##对于list类型,将会采取ziplist,linkedlist两种编码类型.
##同hash.
list-max-ziplist-entries 512
list-max-ziplist-value 64


##zset为有序集合,有2中编码类型:ziplist,skiplist

##因为&quot;排序&quot;将会消耗额外的性能,当zset中数据较多时,将会被重构为skiplist.
##同hash.
zset-max-ziplist-entries 128
zset-max-ziplist-value 64

##intset中允许保存的最大条目个数,如果达到阀值,intset将会被重构为hashtable
set-max-intset-entries 512


##是否开启顶层数据结构的rehash功能,如果内存允许,请开启.
##rehash能够很大程度上提高K-V存取的效率.
activerehashing yes

##客户端buffer控制

##在客户端与server进行的交互中,每个连接都会与一个buffer关联,此buffer用来队列化亟待被client接受的响应信息.
##如果client不能及时的消费响应信息,那么buffer将会被不断积压而给server带来内存压力.如果buffer中积压的数据达到阀值,将会
##导致连接被关闭,buffer被移除.&quot;
##buffer控制类型包括:
## normal -&gt; 普通连接
## slave -&gt;与slave之间的连接
## pubsub -&gt;pub/sub类型连接,此类型的连接,往往会产生此种问题;因为pub端会密集的发布消息,但是sub端可能消费不足.
##指令格式:client-output-buffer-limit &lt;class&gt; &lt;hard&gt; &lt;soft&gt; &lt;seconds&gt;&quot;,其中hard表示buffer最大值,一旦达到阀值将立即关闭连接;
##soft表示&quot;容忍值&quot;,它和seconds配合,如果buffer值超过soft且持续时间达到了seconds,也将立即关闭连接,如果超过了soft但是在seconds之后
##buffer数据小于了soft,连接将会被保留.
# 其中hard和soft都设置为0,则表示禁用buffer控制.通常hard值大于soft.
client-output-buffer-limit normal 0 0 0
client-output-buffer-limit slave 256mb 64mb 60
client-output-buffer-limit pubsub 32mb 8mb 60

##Redis server执行后台任务的频率,默认为10,此值越大表示redis对&quot;间歇性task&quot;的执行次数越频繁(次数/秒)
##&quot;间歇性task&quot;包括&quot;过期集合&quot;检测、关闭&quot;空闲超时&quot;的连接等,此值必须大于0且小于500.(参见redis.h源码)

##此值过小就意味着更多的cpu周期消耗,后台task被轮询的次数更频繁

##此值过大意味着&quot;内存敏感&quot;性较差.
##建议保持默认值
hz 10

##include指令用来载入额外的配置文件模板,也可以在redis server启动时,手动指定需要include的配置文件.
# include /path/to/local.conf
# include /path/to/other.conf
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br><span class="line-number">157</span><br><span class="line-number">158</span><br><span class="line-number">159</span><br><span class="line-number">160</span><br><span class="line-number">161</span><br><span class="line-number">162</span><br><span class="line-number">163</span><br><span class="line-number">164</span><br><span class="line-number">165</span><br><span class="line-number">166</span><br><span class="line-number">167</span><br><span class="line-number">168</span><br><span class="line-number">169</span><br><span class="line-number">170</span><br><span class="line-number">171</span><br><span class="line-number">172</span><br><span class="line-number">173</span><br><span class="line-number">174</span><br><span class="line-number">175</span><br><span class="line-number">176</span><br><span class="line-number">177</span><br><span class="line-number">178</span><br><span class="line-number">179</span><br><span class="line-number">180</span><br><span class="line-number">181</span><br><span class="line-number">182</span><br><span class="line-number">183</span><br><span class="line-number">184</span><br><span class="line-number">185</span><br><span class="line-number">186</span><br><span class="line-number">187</span><br><span class="line-number">188</span><br><span class="line-number">189</span><br><span class="line-number">190</span><br><span class="line-number">191</span><br><span class="line-number">192</span><br><span class="line-number">193</span><br><span class="line-number">194</span><br><span class="line-number">195</span><br><span class="line-number">196</span><br><span class="line-number">197</span><br><span class="line-number">198</span><br><span class="line-number">199</span><br><span class="line-number">200</span><br><span class="line-number">201</span><br><span class="line-number">202</span><br><span class="line-number">203</span><br></div></div></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.3907986d.js" defer></script><script src="/assets/js/2.662b09a6.js" defer></script><script src="/assets/js/163.5dd96070.js" defer></script>
  </body>
</html>
